<html xmlns="http://www.w3.org/1999/xhtml"><head>
  <title>Spot the Surveillance</title>
  <meta name="description" content="EFF Security VR prototype" />
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <link rel="stylesheet" href="/css/surveillance.css">
  <meta content="utf-8" http-equiv="encoding">
  <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
  <script src="js/sts.js"></script>
  <script src="js/links.js"></script>
</head>
<body>
  <div class="wrapper">
    <a-scene>
      <h1>One moment please...</h1>
      <a-assets>
        <!-- images -->
        <img id="alpr-card"  src="assets/alpr-card.png">
        <img id="alpr-mobile-card"  src="assets/alpr-mobile-card.png">
        <img id="biometric-card" src="assets/biometric-card.png">
        <img id="bodycam-card" src="assets/bodycam-card.png">
        <img id="counter-bg" src="assets/binos-in-box.png">
        <img id="camera-card" src="assets/camera-card.png">
        <img id="congrats-card" src="assets/congrats-card-gold.png">
        <img id="drone-card"  src="assets/drone-card.png">
        <img id="intro-card" src="assets/intro-card.png">
        <img id="eff-logo" src="assets/eff-logo-black.svg">
        <img id="exit-card" src="assets/exit-card.png">
        <img id="sts-sky" src="assets/sts-sky1-flip-biometric.jpg">
        <!-- sounds -->
        <audio id="intro-audio" src="assets/intro.mp3"></audio>
        <audio id="beep"  src="assets/beeps.mp3"></audio>
        <audio id="boop"  src="assets/boop.wav"></audio>
        <audio id="ambience" autoplay loop="true" src="assets/traffic.mp3"></audio>
        <audio id="ding"  src="assets/piano-ding.wav" poolsize="20"></audio>
        <!-- mixins -->
        <!-- popups -->
        <a-mixin id="alpr"  position="4.493 3.587 -4.257" geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#alpr-card" rotation="20 -40 0"  visible="false">
        </a-mixin>
        <a-mixin id="alpr-mobile"  position="5.010 3.474 6.979" geometry="primitive: plane; width: 5; height: 5;" material="shader: flat; side: front; opacity: 1; transparent: true; src:#alpr-mobile-card" rotation="0 -150 0"  visible="false" >
        </a-mixin>
        <a-mixin id="biometric"  position="-7.090 4.335 2.069" rotation="0 60 0"  geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; src:#biometric-card" visible="false" >
        </a-mixin>
        <a-mixin id="bodycam"  position="-4.423 2.067 -2.417" rotation="0 60 0"  geometry="primitive: plane; width: 5; height: 5;" material="shader: flat; side: front; opacity: 1; transparent: true; src:#bodycam-card" visible="false" >
        </a-mixin>
        <a-mixin id="camera-popup"  position="4.046 2.689 -0.650" geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; src:#camera-card" rotation="20 -40 0" visible="false"
         >
       </a-mixin>
       <a-mixin id="drone-popup"  position="-1.822 5.516  12.799" geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; src:#drone-card" rotation="20 170 0" scale="1.8 1.8 0" visible="false"
        >
        </a-mixin>
        <a-mixin id="false-positive"  geometry="primitive: plane;  height: 2; width: 3; " material="shader: flat; side: front; opacity: 0.9; transparent: true; color: black;"  visible="false">
        </a-mixin>
        <a-mixin id="intro"  position="1.088 4.189 -3.289" rotation="0 -5 0" geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; transparent: true; src: #intro-card"  sound="src: #intro-audio; autoplay: true; loop: false; volume: 10;"  visible="true">
       </a-mixin>
        <a-mixin id="exit-text"  position="0 -5 -2" geometry="primitive: plane; width: 6; height: 6; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#exit-card"  visible="false" >
        </a-mixin>
        <a-mixin id="congrats"  position="0 -5 -2" geometry="primitive: plane; width: 6; height: 6; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#congrats-card"  visible="false" >
        </a-mixin>

        <!-- misc mixins -->

         <a-mixin id="see-through" material="color: white; transparent: true; opacity: 0;"  scale="3 3 1">
         </a-mixin>
         <a-mixin id="counter"  geometry="primitive: plane; width: 1.5; height: 0.5; " material="shader: flat; side: front;  transparent: true; src:#counter-bg;" text="align: center; color: white; width: 2; height: 1 ; xOffset: 0.15; value: 0 / 7" position="0 -0.85 -2.2">
         </a-mixin>
         <a-mixin id="close" event-set__enter="_event: mouseenter; _target: #alpr; visible: false"
          position="1.6 1.7 1.2" geometry="primitive: plane; width: 1; height: 1;" material="color: black; shader: flat; side: front; opacity: 0; transparent: true; visible: false;" >
         </a-mixin>
         <a-mixin id="replay"
          geometry="primitive: plane; width: 3; height: 1;" material="visible: true; transparent: false; opacity: 1; color: black" position="0.011 -1.926 0.102" text="value: REPLAY"  >
         </a-mixin>

         <a-mixin id="exit-logo" event-set__enter="_event: mouseenter; _target: #exit-screen; visible: true" position="8 -40.524 2.747" geometry="primitive: plane; width: 50; height: 15;" material="transparent: true; color: #ec1e1e; shader: flat; side: front; opacity: 1; src:#eff-logo" rotation="-90 0 0" visible="true" >
         </a-mixin>
         <a-mixin id="exit" geometry="primitive: sphere" position="47.468 -340.523 10.223" scale="300 1 300" material="color: #ec1e1e" >
         </a-mixin>
      </a-assets>


      <a-entity camera look-controls wasd-controls position="0 2.2 4" >
          <a-entity position="0 0 -3"
          geometry="primitive: ring; radiusInner: 0.1; radiusOuter: 0.15;"
          material="color: white; shader: flat"
          cursor="maxDistance: 30; fuse: true">
          <a-animation begin="click" easing="ease-in" attribute="scale"
          fill="forwards" from="0.2 0.2 0.2" to="1 1 1" dur="150"></a-animation>
          <a-animation begin="fusing" easing="ease-in" attribute="scale"
          fill="backwards" from="1 1 1" to="0.2 0.2 0.2" dur="1500"></a-animation>
          </a-entity>
	        <a-entity mixin="counter" id="count-display">
	        </a-entity>
       </a-entity>

    <!-- all the surveillance objects  -->
    <a-entity listener id="surveillance-objects">
      <a-sphere id="alpr-mobile-hotspot"   position="144.400 -17.342 317.810" data-raycastable event-set__enter="_event: mouseenter; _target: #alpr-mobile-popup; visible: true" scale="20 20 20">
      </a-sphere>

      <a-sphere id="alpr-hotspot"   position="14.489 40.071 -11.129" data-raycastable event-set__enter="_event: mouseenter; _target: #alpr; visible: true"  scale="3 3 3">
      </a-sphere>

      <a-sphere id="bodycam-hotspot" position="-115.001 -33.839 -246.276 " data-raycastable geometry="radius: 4" event-set__enter="_event: mouseenter; _target: #bodycam; visible: true"  scale="3 3 3">
      </a-sphere>

      <a-sphere id="biometric-hotspot" position="-170.935 -123.839 -304.428" data-raycastable geometry="radius: 4" event-set__enter="_event: mouseenter; _target: #biometric; visible: true"  scale="3 3 3">
      </a-sphere>

      <a-sphere id="camera1-hotspot" position="40.675 106.831 -68.152" data-raycastable geometry="radius: 4" event-set__enter="_event: mouseenter; _target: #camera-popup; visible: true" scale="2 2 2">
      </a-sphere>

      <a-sphere id="camera2-hotspot" mixin="see-through" position="239.637 86.628 62.650 " data-raycastable geometry="radius: 4" event-set__enter="_event: mouseenter; _target: #camera2-popup; visible: true"  scale="3 3 3">
      </a-sphere>

      <a-sphere id="drone-hotspot"   position="-19.595 115.894 80.722" data-raycastable event-set__enter="_event: mouseenter; _target: #drone-popup; visible: true"  scale="5 5 5">
      </a-sphere>
    </a-entity>
    <!-- false positives -->
    <a-sphere id="bird-hotspot"   position="34.995 69.7 58.84" data-raycastable event-set__enter="_event: mouseenter; _target: #bird-popup; visible: true"  scale="3 3 3">
    </a-sphere>

    <a-sphere id="light-hotspot" mixin="see-through" position="-34.218 15.962 -15.142" data-raycastable event-set__enter="_event: mouseenter; _target: #light-popup; visible: true"  scale="3 3 3">
    </a-sphere>

    <!-- all the popups -->
    <a-entity  id="alpr-mobile-popup" mixin="alpr-mobile"  >
      <a-text mixin="close"  event-set__enter=" _target: #alpr-mobile-popup;" >
      </a-text>
    </a-entity>

    <a-entity id="alpr-wrapper" position="0 0.5 1">
      <a-entity mixin="alpr">
        <a-text mixin="close">
        </a-text>
    </a-entity>
  </a-entity>

  <a-entity  id="biometric-popup" mixin="biometric"  >
    <a-text mixin="close"  event-set__enter=" _target: #biometric;" >
    </a-text>
  </a-entity>

    <a-entity id="bodycam-wrapper">
      <a-entity  mixin="bodycam" >
        <a-text mixin="close"  event-set__enter=" _target: #bodycam;" >
        </a-text>
      </a-entity>
    </a-entity>

    <a-entity  id="camera1-popup" mixin="camera-popup"  >
      <a-text mixin="close"  event-set__enter=" _target: #camera1-popup;" >
      </a-text>
    </a-entity>

    <a-entity  id="camera2-popup" mixin="camera" position="7.0 1.23 3.612" rotation="0 -120 0" >
      <a-text mixin="close"  event-set__enter=" _target: #camera2-popup;" >
      </a-text>
    </a-entity>

    <a-entity  id="drone-popup" mixin="drone-popup" sound="src: #beep; autoplay: false; loop: false; volume: 1; on: click" >
      <a-text mixin="close"  event-set__enter=" _target: #drone-popup;" >
      </a-text>
    </a-entity>

    <!-- false positives -->
    <a-entity  id="bird-popup" mixin="false-positive"  text="color: white; align: center; value: Good try, but that's just a bird. Keep looking!" rotation="20 180 0" position="3.236 3.7 7">
      <a-entity mixin="close" event-set__enter="_event: mouseenter; _target: #bird-popup; visible: false" geometry="width: 0.5; height: 0.5;"  material="visible: true; transparent: false; opacity: 1;" text="align: center; width: 3; height: 3; value: X" position="1.226 0.604 0.394" >
      </a-entity>
    </a-entity>

    <a-entity  id="light-popup" mixin="false-positive"  text="color: white; align: center; value: Good try, but that's just a light fixture. Keep looking! " position="-4.184 2.203 -2.925" rotation="0 60 0">
      <a-entity mixin="close"  event-set__enter=" _target: #light-popup;" geometry="width: 0.5; height: 0.5;" material="visible: true; transparent: false; opacity: 1;" text="align: center; width: 3; height: 3; value: X" position="1.226 0.604 0.394">
      </a-entity>
    </a-entity>

    <a-entity id="exit-sts" mixin="exit-logo" exitlink="href: https://eff.org" >
    </a-entity>
    <a-entity id="magic-carpet" mixin="exit">
    </a-entity>
    <a-entity id="sky" geometry="primitive: sphere; radius:1000"  material="shader: flat; side: back;  src:#sts-sky" sound="src: #ambience; loop:true; volume: 0.1" >
    </a-entity>

</a-scene>
</div>
</body>
</html>
