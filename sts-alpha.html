<html xmlns="http://www.w3.org/1999/xhtml"><head>
  <title>Spot the Surveillance</title>
  <meta name="description" content="EFF Security VR prototype" />
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <link rel="stylesheet" href="/css/surveillance.css">
  <meta content="utf-8" http-equiv="encoding">
  <script src="https://aframe.io/releases/0.8.2/aframe.min.js"></script>
  <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
  <script src="js/sts.js"></script>
  <script src="js/links.js"></script>
</head>
<body>
  <div class="wrapper">
    <a-scene>
      <h1>One moment please...</h1>
      <a-assets>
        <!-- images -->
        <img id="alpr-card"  src="assets/alpr-card.png">
        <img id="alpr-mobile-card"  src="assets/alpr-mobile-card.png">
        <img id="biometric-card" src="assets/biometric-card.png">
        <img id="bodycam-card" src="assets/bodycam-card.png">
        <img id="counter-bg" src="assets/binos-in-box.png">
        <img id="camera-card" src="assets/camera-card.png" poolsize="2">
        <img id="congrats-card" src="assets/congrats-card-gold.png">
        <img id="drone-card"  src="assets/drone-card.png">
        <img id="intro-card" src="assets/intro-card.png">
        <img id="eff-logo" src="assets/eff-logo-black.svg">
        <img id="exit-card" src="assets/exit-card.png">
        <img id="sts-sky" src="assets/sts-sky1-flip-blurred.jpg">
        <!-- sounds -->
        <audio id="intro-audio" src="assets/intro.mp3"></audio>
        <audio id="beep"  src="assets/beeps.mp3"></audio>
        <audio id="boop"  src="assets/boop.wav"></audio>
        <audio id="ambience" autoplay loop="true" src="assets/traffic.mp3"></audio>
        <audio id="ding"  src="assets/piano-ding.wav" poolsize="20"></audio>
        <!-- mixins -->
        <!-- popups -->

        <a-mixin id="alpr" geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#alpr-card" position="7.482 1.642 0.368"  rotation="20 -80 0"  visible="false">
        </a-mixin>
        <a-mixin id="alpr-mobile"  position="5.010 4.083 6.979" geometry="primitive: plane; width: 5; height: 5;" material="shader: flat; side: front; opacity: 1; transparent: true; src:#alpr-mobile-card" rotation="0 -150 0"  visible="false" >
        </a-mixin>
        <a-mixin id="biometric"  position="-7.090 2.137 2.069" rotation="0 100 0"  geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#biometric-card" visible="false" >
        </a-mixin>
        <a-mixin id="bodycam"  position="-5.281 1.118 -2.832" rotation="0 60 0"  geometry="primitive: plane; width: 5; height: 5;" material="shader: flat; side: front; opacity: 1; transparent: true; src:#bodycam-card" visible="false" >
        </a-mixin>
        <a-mixin id="camera-popup"  position="3.300 2.988 -2.717"  geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#camera-card" rotation="20 -40 0" visible="false"
         >
       </a-mixin>
       <a-mixin id="drone-popup"  position="-1.822 5.516  12.799" geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#drone-card" rotation="20 170 0" scale="1.8 1.8 0" visible="false"
        >
        </a-mixin>
        <a-mixin id="false-positive"  geometry="primitive: plane;  height: 2; width: 3; " material="shader: flat; side: front; opacity: 0.9; transparent: true; color: black;"  visible="false">
        </a-mixin>
        <a-mixin id="intro"  position="0.715 4.5 -5.991" rotation="0 -5 0" geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; transparent: true; src: #intro-card"  sound="src: #intro-audio; autoplay: true; loop: false; volume: 1;"  visible="true">
       </a-mixin>
        <a-mixin id="exit-text"  position="0 -5 -2" geometry="primitive: plane; width: 6; height: 6; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#exit-card"  visible="false" >
        </a-mixin>
        <a-mixin id="congrats"  position="0 -5 -2" geometry="primitive: plane; width: 6; height: 6; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#congrats-card"  visible="false" >
        </a-mixin>

        <!-- misc mixins -->

         <a-mixin id="see-through" material="color: white; transparent: true; opacity: 0;"  scale="3 3 1">
         </a-mixin>
         <a-mixin id="counter"  geometry="primitive: plane; width: 1.5; height: 0.5; " material="shader: flat; side: front;  transparent: true; src:#counter-bg;" text="align: center; color: white; width: 2; height: 1 ; xOffset: 0.15; value: 0 / 7" position="0 -0.85 -2.2">
         </a-mixin>
         <a-mixin id="close" event-set__enter="_event: mouseenter; _target: #alpr; visible: false"
          position="1.6 1.7 1.2" geometry="primitive: plane; width: 1; height: 1;" material="color: black; shader: flat; side: front; opacity: 0; transparent: true; visible: false;" >
         </a-mixin>
         <a-mixin id="replay"
          geometry="primitive: plane; width: 3; height: 1;" material="visible: true; transparent: false; opacity: 1; color: black" position="0.011 -1.926 0.102" text="value: REPLAY"  >
         </a-mixin>

         <a-mixin id="exit-logo" event-set__enter="_event: mouseenter; _target: #exit-screen; visible: true" position="8 -40.524 2.747" geometry="primitive: plane; width: 50; height: 15;" material="transparent: true; color: #ec1e1e; shader: flat; side: front; opacity: 1; src:#eff-logo" rotation="-90 0 0" visible="true" >
         </a-mixin>
         <a-mixin id="exit" geometry="primitive: sphere" position="47.468 -340.523 10.223" scale="300 1 300" material="color: #ec1e1e" >
         </a-mixin>
      </a-assets>


      <a-entity camera look-controls wasd-controls position="0 2.2 4" >
          <a-entity position="0 0 -3"
          geometry="primitive: ring; radiusInner: 0.1; radiusOuter: 0.15;"
          material="color: white; shader: flat"
          cursor="maxDistance: 30; fuse: true">
          <a-animation begin="click" easing="ease-in" attribute="scale"
          fill="forwards" from="0.2 0.2 0.2" to="1 1 1" dur="150"></a-animation>
          <a-animation begin="fusing" easing="ease-in" attribute="scale"
          fill="backwards" from="1 1 1" to="0.2 0.2 0.2" dur="1500"></a-animation>
          </a-entity>
	        <a-entity mixin="counter" id="count-display">
	        </a-entity>
       </a-entity>

    <!-- all the surveillance objects  -->
    <a-entity listener id="surveillance-objects">

      <a-sphere id="alpr-hotspot" mixin="see-through"  position="14.489 40.071 -11.129" data-raycastable event-set__enter="_event: mouseenter; _target: #alpr; visible: true"  scale="3 3 3">
      </a-sphere>

      <a-sphere id="alpr-mobile-hotspot" mixin="see-through"  position="144.400 -17.342 317.810" data-raycastable event-set__enter="_event: mouseenter; _target: #alpr-mobile-popup; visible: true" scale="20 20 20">
      </a-sphere>

      <a-sphere id="bodycam-hotspot" mixin="see-through" position="-3.325 0.577 -6.036" data-raycastable geometry="radius: 0.5" event-set__enter="_event: mouseenter; _target: #bodycam-popup; visible: true" scale="1 1 1">
      </a-sphere>

      <a-sphere id="biometric-hotspot" mixin="see-through" position="-170.935 -123.839 -304.428" data-raycastable geometry="radius: 4" event-set__enter="_event: mouseenter; _target: #biometric; visible: true"  scale="3 3 3">
      </a-sphere>

      <a-sphere id="camera1-hotspot" mixin="see-through" position="17.628 59.430 -37.161" data-raycastable geometry="radius: 4" event-set__enter="_event: mouseenter; _target: #camera1-popup; visible: true" scale="2 2 2">
      </a-sphere>

      <a-sphere id="camera2-hotspot" mixin="see-through" position="239.637 86.628 62.650 " data-raycastable geometry="radius: 4" event-set__enter="_event: mouseenter; _target: #camera2-popup; visible: true"  scale="3 3 3">
      </a-sphere>

      <a-sphere id="drone-hotspot"  mixin="see-through" position="-20.611 146.779 133.158" data-raycastable event-set__enter="_event: mouseenter; _target: #drone-popup; visible: true"  scale="5 5 5">
      </a-sphere>
    </a-entity>

    <!-- false positives -->
    <a-sphere id="bird-hotspot"   position="34.995 69.7 58.84" data-raycastable event-set__enter="_event: mouseenter; _target: #bird-popup; visible: true"  scale="3 3 3">
    </a-sphere>

    <a-sphere id="light-hotspot" mixin="see-through" position="-19.084 9.421 -7.871" data-raycastable event-set__enter="_event: mouseenter; _target: #light-popup; visible: true"  scale="2 2 2">
    </a-sphere>

    <!-- all the popups -->
    <a-entity  id="alpr-mobile-popup" mixin="alpr-mobile"  >
      <a-text mixin="close"  event-set__enter=" _target: #alpr-mobile-popup;"  position="2.127 1.842 0.131" >
      </a-text>
    </a-entity>

      <a-entity id="alpr-popup" mixin="alpr" >
        <a-text mixin="close" event-set__enter=" _target: #alpr-popup;" >
        </a-text>
    </a-entity>


  <a-entity  id="biometric-popup" mixin="biometric"  >
    <a-text mixin="close"  event-set__enter=" _target: #biometric-popup;" >
    </a-text>
  </a-entity>

      <a-entity id="bodycam-popup" mixin="bodycam" >
        <a-text mixin="close"  event-set__enter=" _target: #bodycam-popup;" >
        </a-text>
      </a-entity>

    <a-entity  id="camera1-popup" mixin="camera-popup"  >
      <a-text mixin="close"  event-set__enter=" _target: #camera1-popup;" >
      </a-text>
    </a-entity>

    <a-entity  id="camera2-popup" mixin="camera-popup" position="7.0 1.4 3.612" rotation="0 -120 0" >
      <a-text mixin="close"  event-set__enter=" _target: #camera2-popup;" position="2.357 1.726 1.458" >
      </a-text>
    </a-entity>

    <a-entity  id="drone-popup" mixin="drone-popup" sound="src: #beep; autoplay: false; loop: false; volume: 1; on: click" >
      <a-text mixin="close"  event-set__enter=" _target: #drone-popup;" >
      </a-text>
    </a-entity>

    <!-- false positives -->
    <a-entity  id="bird-popup" mixin="false-positive"  text="color: white; align: center; value: Good try, but that's just a bird. Keep looking!" rotation="20 180 0" position="1.862 3.624 8.830">
      <a-entity mixin="close" event-set__enter="_event: mouseenter; _target: #bird-popup; visible: false" geometry="width: 0.5; height: 0.5;"  material="visible: true; transparent: false; opacity: 1;" text="align: center; width: 3; height: 3; value: X" position="1.226 0.604 0.394" >
      </a-entity>
    </a-entity>

    <a-entity  id="light-popup" mixin="false-positive"  text="color: white; align: center; value: Good try, but that's just a light fixture. Keep looking! " position="-3.026 5.872 -0.366" rotation="40 60 0">
      <a-entity mixin="close"  event-set__enter="_event: mouseenter; _target: #light-popup; visible: false" geometry="height: 0.5; width: 0.5" material="visible: true; transparent: false; opacity: 1;" text="align: center; width: 3; height: 3; value: X" position="0.940 0.632 0.365">
      </a-entity>
    </a-entity>

    <!-- intro -->
    <a-entity  id="intro-popup" mixin="intro" sound="loop: false;">
      <a-entity mixin="close"  event-set__enter="_event: click; _target: #intro-popup; visible: false" geometry="height: 1; width: 3" material="visible: false; transparent: true; opacity: 0;" position="0.072 -1.707 0.905">
      </a-entity>
    </a-entity>

    <!-- exit -->

          <a-entity  id="exit-screen" mixin="exit-text"  position="1.391 -6.7 -4" rotation="-60 0 0">
          <a-entity id="sls" mixin="close" geometry="height: 1; width: 3; "  position="-0.036 -0.881 0.394" exitlink="href:https://www.eff.org/issues/street-level-surveillance" >
          </a-entity>
          <a-entity id="resume" mixin="close"event-set__enter="_event: click; _target: #exit-screen; visible: false" geometry="height: 0.6; width: 1.6;" position="-0.061 -2.267 1.132"  >
          </a-entity>
        </a-entity>

        <a-entity  id="congrats-popup1" mixin="congrats"  sound="src: #beep; autoplay: false; loop: false; volume: 1; on: click" position="8.254 2.580 -2.305" rotation="0 -80 0">
          <a-entity id="replay1" mixin="replay"  >
          </a-entity>
        </a-entity>

        <a-entity  id="congrats-popup2" mixin="congrats" position="-1.961 2.310 9.023" rotation="0 -190 0">
          <a-entity id="replay2" mixin="replay" >
          </a-entity>
        </a-entity>

        <a-entity  id="congrats-popup3" mixin="congrats" position="-5.114 2.558  -5.631" rotation="0 30 0">
          <a-entity id="replay3" mixin="replay" >
          </a-entity>
        </a-entity>
        <!-- end popups -->

    <a-entity id="exit-sts" mixin="exit-logo"  >
    </a-entity>
    <a-entity id="magic-carpet" mixin="exit">
    </a-entity>
    <a-entity id="sky" geometry="primitive: sphere; radius:1000"  material="shader: flat; side: back;  src:#sts-sky" sound="src: #ambience; loop:true; volume: 20" >
    </a-entity>

</a-scene>
</div>
</body>
</html>
