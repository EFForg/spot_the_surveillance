<html xmlns="http://www.w3.org/1999/xhtml"><head>
  <title>Spot the Surveillance</title>
  <meta name="description" content="EFF Security VR prototype" />
  <meta content="text/html;charset=utf-8" http-equiv="Content-Type">
  <link rel="stylesheet" href="css/sts.css">
  <meta content="utf-8" http-equiv="encoding">
  <script src="js/aframe.js"></script>
  <script src="https://unpkg.com/aframe-event-set-component@^4.0.0/dist/aframe-event-set-component.min.js"></script>
  <script src="https://unpkg.com/aframe-particle-system-component@1.0.x/dist/aframe-particle-system-component.min.js"></script>
  <script src="js/sts.js"></script>
  <script src="js/clickonce.js"></script>
  <script src="js/links.js"></script>
  <script src="js/replay.js"></script>
</head>
<body>
  <div class="wrapper">
    <a-scene>
      <h1>One moment please...</h1>
      <a-assets>
        <!-- images -->
        <img id="alpr-card"  src="assets/alpr-card.png">
        <img id="alpr-mobile-card"  src="assets/alpr-mobile-card.png">
        <img id="biometric-card" src="assets/biometric-card.png">
        <img id="bodycam-card" src="assets/bodycam-card.png">
        <img id="counter-bg" src="assets/binos-in-box.png">
        <img id="camera-card" src="assets/camera-card.png">
        <img id="congrats-card" src="assets/congrats-card-replay.png">
        <img id="drone-card"  src="assets/drone-card.png">
        <img id="intro-card" src="assets/intro-card.png">
        <img id="eff-logo" src="assets/eff-logo-black.svg">
        <img id="attribution-card" src="assets/attribution-card.png">
        <img id="exit-card" src="assets/exit-card.png">
        <img id="left-arrow" src="assets/left-arrow-white.png">
        <img id="right-arrow" src="assets/right-arrow-white.png">

        <img id="found" src="assets/selected.png">

        <img id="sts-sky" src="assets/sts-sky1-flip-bird.jpg">

        <!-- sounds -->
        <audio id="alpr-audio" src="assets/alpr.mp3"></audio>
        <audio id="alpr-mobile-audio" src="assets/alpr-mobile.mp3"></audio>
        <audio id="biometric-audio" src="assets/biometric.mp3"></audio>
        <audio id="bodycam-audio" src="assets/bodycam.mp3"></audio>
        <audio id="camera-audio" src="assets/camera.mp3"></audio>
        <audio id="drone-audio" src="assets/drone.mp3"></audio>
        <audio id="bird-audio" src="assets/bird.mp3"></audio>
        <audio id="light-audio" src="assets/light.mp3"></audio>
        <audio id="intro-audio" src="assets/intro-delayed.mp3"></audio>
        <audio id="exit-audio" src="assets/exit.mp3"></audio>
        <audio id="congrats-audio" src="assets/congrats.mp3"></audio>
        <audio id="beep"  src="assets/beeps.mp3"></audio>
        <audio id="boop"  src="assets/boop.wav"></audio>
        <audio id="ambience" src="assets/traffic-fade.mp3"></audio>
        <audio id="ding"  src="assets/piano-ding.wav"></audio>
        <!-- mixins -->
        <!-- popups -->

        <a-mixin id="alpr" geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#alpr-card" position="7.482 1.642 0.368"  rotation="20 -80 0"  visible="false">
        </a-mixin>
        <a-mixin id="alpr-mobile"  position="4.267 4.876 6.961" geometry="primitive: plane; width: 4; height: 4;" material="shader: flat; side: front; opacity: 1; transparent: true; src:#alpr-mobile-card" rotation="20 -150 0"  visible="false" >
        </a-mixin>
        <a-mixin id="biometric"  position="-7.264 1.235 -0.369" rotation="0 90 0"  geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#biometric-card" visible="false" >
        </a-mixin>
        <a-mixin id="bodycam"  position="-6.684 1.118 -4.531" rotation="0 60 0"  geometry="primitive: plane; width: 5; height: 5;" material="shader: flat; side: front; opacity: 1; transparent: true; src:#bodycam-card" visible="false" >
        </a-mixin>
        <a-mixin id="camera"  position="3.300 2.988 -2.717"  geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#camera-card" rotation="20 -40 0" visible="false"
         >
       </a-mixin>
       <a-mixin id="drone"  position="-5.804 3.960 10.569" geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#drone-card" rotation="20 150 0"  visible="false"
        >
        </a-mixin>
        <a-mixin id="false-positive"  geometry="primitive: plane;  height: 2; width: 3; " material="shader: flat; side: front; opacity: 0.9; transparent: true; color: black;"  visible="false">
        </a-mixin>
        <a-mixin id="intro"  position="0.715 4.5 -5.991" rotation="0 -5 0" geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front; opacity: 1; transparent: true; src: #intro-card"  sound="src: #intro-audio; autoplay: true; loop: false; volume: 5;"  visible="true">
       </a-mixin>
       <a-mixin id="attribution-text"  position="5.584 -4.109 -2.995" geometry="primitive: plane; width: 6; height: 6; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#attribution-card"  rotation="-60 -30 0" visible="false" >
       </a-mixin>
        <a-mixin id="exit-text"  position="0 -5 -2" geometry="primitive: plane; width: 6; height: 6; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#exit-card"  visible="false" >
        </a-mixin>
        <a-mixin id="congrats"  position="0 -5 -2" geometry="primitive: plane; width: 4; height: 4; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#congrats-card" visible="false" >
        </a-mixin>
        <a-mixin id="arrow"  position="0 -5 -2" geometry="primitive: plane; width: 2; height: 2; " material="shader: flat; side: front; opacity: 1; transparent: true; src:#right-arrow" visible="false" >
        </a-mixin>

        <!-- misc mixins -->

         <a-mixin id="see-through" material="color: white; transparent: true; opacity: 0;"  scale="3 3 1">
         </a-mixin>
         <a-mixin id="spotted"  geometry="primitive: plane; width: 5; height: 5; " material="shader: flat; side: front;  transparent: true; src:#found;">
         </a-mixin>
         <a-mixin id="counter"  geometry="primitive: plane; width: 1.5; height: 0.5; " material="shader: flat; side: front;  transparent: true; src:#counter-bg;" text="align: center; color: white; width: 2; height: 1 ; xOffset: 0.15; value: 0 / 7" position="0 -0.85 -2.2">
         </a-mixin>
         <a-mixin id="close"  event-set__enter="_event: mouseenter; _target: #alpr; visible: false"
          position="1.6 1.7 1.2" geometry="primitive: plane; width: 1; height: 1;" material="color: black; shader: flat; side: front; opacity: 0; transparent: true; visible: false;" >
         </a-mixin>
         <a-mixin id="replay"
          geometry="primitive: plane; height: 0.35; width: 1.2;" material="visible: false; transparent: true; opacity: 0;" position="-0.010 -1.525 0.074"  >
         </a-mixin>

         <a-mixin id="exit-logo" event-set__enter="_event: mouseenter; _target: #exit-screen; visible: true" position="8 -40.524 2.747" geometry="primitive: plane; width: 50; height: 15;" material="transparent: true; color: #ec1e1e; shader: flat; side: front; opacity: 1; src:#eff-logo" rotation="-90 0 0" visible="true" >
         </a-mixin>
         <a-mixin id="exit" geometry="primitive: sphere" position="47.468 -340.523 10.223" scale="300 1 300" material="color: #ec1e1e" >
         </a-mixin>
      </a-assets>

      <a-entity camera look-controls wasd-controls position="0 2.2 4" >
          <a-entity id="cursor" position="0 0 -3"
          geometry="primitive: ring; radiusInner: 0.1; radiusOuter: 0.15;"
          material="color: white; shader: flat"
          cursor="maxDistance: 30; fuse: true" raycaster="objects: [data-clickable]";>
          <a-animation begin="click" easing="ease-in" attribute="scale"
          fill="forwards" from="0.2 0.2 0.2" to="1 1 1" dur="150"></a-animation>
          <a-animation begin="fusing" easing="ease-in" attribute="scale"
          fill="backwards" from="1 1 1" to="0.2 0.2 0.2" dur="1500"></a-animation>
        </a-entity>
	        <a-entity mixin="counter" id="count-display">
	        </a-entity>
       </a-entity>

    <!-- all the surveillance objects  -->
    <a-entity listener id="surveillance-objects">

      <a-sphere id="alpr-hotspot" data-clickable click-once  mixin="spotted"   event-set__click="_event: click; _target: #alpr; visible: true" geometry="height:6; width:6;" position="10.379 26.918 -11.273" rotation="50 0 0" visible="false">
      </a-sphere>

      <a-sphere id="alpr-mobile-hotspot" data-clickable click-once mixin="spotted"  event-set__click="_event: click; _target: #alpr-mobile-popup; visible: true" geometry="height: 2.5; width: 3;" position="3.622 1.58 8.019" rotation="180 0 20" visible="false">
      </a-sphere>

      <a-sphere id="biometric-hotspot" data-clickable click-once  mixin="spotted"    event-set__click="_event: click; _target: #biometric; visible: true"  geometry="height: 7; width: 7;" position="-14.982 -9.975 -25.215" rotation="0 20 0"  visible="false">
      </a-sphere>

      <a-sphere id="bodycam-hotspot" data-clickable click-once mixin="spotted"   event-set__click="_event: click; _target: #bodycam-popup; visible: true"  geometry="height: 1; width: 1" position="-2.85 0.577 -6.036" scale="1 1 1" visible="false">
      </a-sphere>

      <a-sphere id="camera1-hotspot" data-clickable click-once mixin="spotted"  event-set__click="_event: click; _target: #camera1-popup; visible: true" geometry="height:12; width: 12;" position="23.244 58.391 -39.778" rotation="40 0 0"  visible="false">
      </a-sphere>

      <a-sphere id="camera2-hotspot" data-clickable click-once  mixin="spotted"   geometry="height:4; width: 4;" event-set__click="_event: click; _target: #camera2-popup; visible: true" position="67.684 28.461 17.549" rotation="180 70 0" scale="3 3 3" visible="false">
      </a-sphere>

      <a-sphere id="drone-hotspot" data-clickable click-once     mixin="spotted" event-set__click="_event: click; _target: #drone-popup; visible: true" geometry="height:5; width: 5;" position="-3.999 33.763 28.948" rotation="70 90 0" scale="2 2 2" visible="false">
      </a-sphere>
    </a-entity>

    <!-- false positives -->
    <a-sphere id="bird-hotspot"  data-clickable  mixin="see-through" event-set__click="_event: click; _target: #bird-popup; visible: true" geometry="height:3; width: 3" position="9.039 32.076 17.084" rotation="110 0 0" material="visible:true; transparent: false; opacity: 1">
    </a-sphere>

    <a-sphere id="light-hotspot" data-clickable  mixin="see-through"   event-set__click="_event: click; _target: #light-popup; visible: true" geometry="height:2; width: 2;" position="-19.031 9.249 -8.468" rotation= "0 40 0" scale="2 2 2">
    </a-sphere>

    <!-- all the popups -->

      <a-entity id="alpr-popup" data-clickable mixin="alpr" sound="src: #alpr-audio; autoplay: false; loop: false; volume: 5; on: click">
        <a-text mixin="close" event-set__enter=" _target: #alpr-popup; sound.volume: 0" >
        </a-text>
    </a-entity>

    <a-entity  id="alpr-mobile-popup"  data-clickable mixin="alpr-mobile" sound="src: #alpr-mobile-audio; autoplay: false; loop: false; volume: 5; on: click" >
      <a-text event-set__enter="_event: mouseenter; _target: #alpr-mobile-popup;  visible: false; sound.volume: 0;" geometry="primitive: plane; width: 0.5; height: 0.5;"  position="1.600 1.6 1.189" material="color: black; shader: flat; side: front;visible: false; transparent: true; opacity: 0;" >
      </a-text>
    </a-entity>

   <a-entity  id="biometric-popup" data-clickable mixin="biometric" sound="src: #biometric-audio; autoplay: false; loop: false; volume: 5; on: click">
    <a-text mixin="close"  event-set__enter=" _target: #biometric-popup; sound.volume: 0;" >
    </a-text>
   </a-entity>

    <a-entity id="bodycam-popup" data-clickable mixin="bodycam" sound="src: #bodycam-audio; autoplay: false; loop: false; volume: 5; on: click" >
      <a-text mixin="close"  event-set__enter=" _target: #bodycam-popup; sound.volume: 0;"  >
      </a-text>
    </a-entity>

    <a-entity  id="camera1-popup" data-clickable mixin="camera" sound="src: #camera-audio; autoplay: false; loop: false; volume: 5; on: click">
      <a-text mixin="close" data-clickable event-set__enter=" _target: #camera1-popup; sound.volume: 0;" >
      </a-text>
    </a-entity>

    <a-entity  id="camera2-popup" data-clickable mixin="camera"  position="7.0 1.4 3.612" rotation="0 -120 0" sound="src: #camera-audio; autoplay: false; loop: false; volume: 5; on: click">
      <a-text mixin="close" data-clickable event-set__enter=" _target: #camera2-popup; sound.volume: 0;"  >
      </a-text>
    </a-entity>

    <a-entity  id="drone-popup" data-clickable mixin="drone"  sound="src: #drone-audio; autoplay: false; loop: false; volume: 6; on: click">
      <a-text mixin="close" event-set__enter=" _target: #drone-popup; sound.volume: 0;">
      </a-text>
    </a-entity>

    <!-- false positives -->
    <a-entity  id="bird-popup" data-clickable mixin="false-positive" text="color: white; align: center; value: Good try, but that's just a bird. Keep looking!" rotation="10 170 0" position="0.275 4.930 9.298" sound="src: #bird-audio; autoplay: false; loop: false; volume: 5; on: click">
      <a-entity mixin="close" event-set__enter="_event: mouseenter; _target: #bird-popup; visible: false; sound.volume: 0;" geometry="width: 0.5; height: 0.5;"  material="visible: true; transparent: false; opacity: 1;" text="align: center; width: 3; height: 3; value: X" position="1.226 0.604 0.394" >
      </a-entity>
    </a-entity>

    <a-entity  id="light-popup" data-clickable mixin="false-positive" text="color: white; align: center; value: Good try, but that's just a light fixture. Keep looking! " position="-3.026 4.122 -0.366" rotation="40 60 0" sound="src: #light-audio; autoplay: false; loop: false; volume: 5; on: click">
      <a-entity mixin="close"  event-set__enter="_event: mouseenter; _target: #light-popup; sound.volume: 0;; visible: false" geometry="height: 0.5; width: 0.5" material="visible: true; transparent: false; opacity: 1;" text="align: center; width: 3; height: 3; value: X" position="0.940 0.632 0.365">
      </a-entity>
    </a-entity>

    <!-- intro -->
    <a-entity  id="intro-popup" mixin="intro" sound="loop: false;">
      <a-entity mixin="close" data-clickable  event-set__enter="_event: click; _target: #intro-popup; visible: false" geometry="height: 1; width: 3" material="visible: false; transparent: true; opacity: 0;" position="0.072 -1.707 0.905">
      </a-entity>
    </a-entity>
  <!-- attribution -->
  <a-entity  id="attribution-popup" mixin="attribution-text"  >
  </a-entity>
    <!-- exit -->

          <a-entity  id="exit-screen" mixin="exit-text" e position="1.391 -6.7 -4" rotation="-60 0 0" sound="src: #exit-audio; autoplay: false; loop: false; volume: 5; on: click">
          <a-entity id="sls" mixin="close" data-clickable geometry="height: 1; width: 3; " position="-0.036 -0.881 0.394"  exitlink="href: https://www.eff.org/issues/street-level-surveillance;" >
          </a-entity>
          <a-entity id="resume" mixin="close" data-clickable event-set__enter="_event: click; _target: #exit-screen; visible: false; sound.volume: 0;"   geometry="height: 1; width: 1.6;" position="-0.095 -1.997 0.910"  >
          </a-entity>
        </a-entity>
        <a-entity id="congrats-all" >
          <a-entity  id="congrats-popup1" mixin="congrats" position="5.584 1.250 -1.325" rotation="0 -80 0" sound="src: #congrats-audio; autoplay: false; loop: false; volume: 5; on: click"  >
            <a-entity id="sls1" mixin="close" data-clickable geometry="height: 0.5; width: 2.1; "  position="0 -0.658 0.399" exitlink="href:https://www.eff.org/issues/street-level-surveillance" >
            </a-entity>
            <a-entity replay id="replay1" data-clickable  mixin="replay"  >
            </a-entity>
          </a-entity>

          <a-entity  id="congrats-left-arrow1" mixin="arrow" position="-1.961 1.9 9.023" rotation="0 -190 0" material="src:#left-arrow" >
          </a-entity>

          <a-entity  id="congrats-left-arrow2" mixin="arrow" position="4.683 1.9 6.271" rotation="0 -120 0" material="src:#left-arrow" >
          </a-entity>

          <a-entity  id="congrats-right-arrow1" mixin="arrow"  position="-5.721 1.9 4.142"  rotation="0 80 0">
          </a-entity>

          <a-entity  id="congrats-right-arrow2" mixin="arrow"  position="-2.440 1.9 -5.174"  rotation="0 40 0">
          </a-entity>

          <!--a-entity id="confetti" particle-system="accelerationSpread: 20 0 20; color: white; enabled: false;  particleCount: 300; opacity: 0.3; preset: default; size: 0.5; velocityValue: 0 15 0" position="5.584 1.250 -1.4"  ></a-entity-->

        </a-entity>
        <!-- end popups -->

    <a-entity id="exit-sts" data-clickable  mixin="exit-logo"  >
    </a-entity>
    <a-entity  id="attribution-hotspot" data-clickable event-set__enter="_event: mouseenter; _target: #attribution-popup; visible: true" position="1.821 -12.750 -3.844" geometry="primitive: plane; width: 10; height: 5;" material="color: #ec1e1e; shader: flat; side: front; opacity: 1;" rotation="-90 0 0" visible="true"  text="color: white; align: center; value: attribution">
    </a-entity>
    <a-entity id="magic-carpet" mixin="exit">
    </a-entity>
    <a-entity id="sky" geometry="primitive: sphere; radius:1000"  material="shader: flat; side: back;  src:#sts-sky" sound="src: #ambience; autoplay: true; loop: true; volume: 1;"  >
    </a-entity>

</a-scene>
</div>
</body>
</html>
